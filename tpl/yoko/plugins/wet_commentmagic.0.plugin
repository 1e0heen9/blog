a:11:{s:4:"name";s:16:"wet_commentmagic";s:6:"status";s:1:"1";s:6:"author";s:16:"Robert Wetzlmayr";s:10:"author_uri";s:69:"http://awasteofwords.com/software/wet_commentmagic-textpattern-plugin";s:7:"version";s:3:"0.5";s:11:"description";s:58:"A text matching and replacing filter for comment messages.";s:4:"help";s:266:"	<p><strong>wet_commentmagic</strong> searches for certain text patterns inside comment messages and replaces them with others. A basic, expandable set of rules replaces web addresses with clickable links.</p>

	<p>Add to the $rules array to please your desires.</p>";s:4:"code";s:1346:"
// Apply text replacment when a comment is previewed
if(ps('preview')) {
	wet_commentmagic();
}

function wet_commentmagic()
{
	// Limit maximum character count of hyperlinked text derived from URLs
	$truncate_urls_at = 20;

	// These are the replacement rules: Expand to your liking
	// Caveat: Replacement is textiled later on!
    $rules = Array (
    // detect, autolink and truncate URLs (www.*, http://*, https://*, ftp://*)
    '/(\s|^)(www\.[\w.\/?#%=\+]+)(\s|$)*?/ieu' => "'$1\"'.wet_cm_truncate('$2', $truncate_urls_at).'\":http://$2$3'",
    '/(\s|^)(https?:\/\/|ftp:\/\/)([\w.\/?#%=\+]+)(\s|$)*?/ieu' => "'$1\"'.wet_cm_truncate('$3', $truncate_urls_at).'\":$2$3$4'"
    );

    if(load_plugin('wet_foullanguage')) {
    	$rules = array_merge($rules, wet_foullanguage());
    }

    $needles = array_keys($rules);
    $pins = array_values($rules);

	$c = (getComment());
	// The comment message lands as a salted $_POST member upon second preview
	// @see publish/comment.php
    if(empty($c['secret'])) {
    	$msg = 'message';
    } else {
    	$msg = md5('message'.$c['secret']);
    }

	// apply the magic
    $_POST[$msg] = preg_replace($needles, $pins, $_POST[$msg]);
}

function wet_cm_truncate($what, $max)
{
	return(strlen(utf8_decode($what)) > $max) ?
		preg_replace('/^(.{0,'.$max.'}).*$/su', '$1', $what).'...' : $what;
}
";s:12:"code_restore";s:1346:"
// Apply text replacment when a comment is previewed
if(ps('preview')) {
	wet_commentmagic();
}

function wet_commentmagic()
{
	// Limit maximum character count of hyperlinked text derived from URLs
	$truncate_urls_at = 20;

	// These are the replacement rules: Expand to your liking
	// Caveat: Replacement is textiled later on!
    $rules = Array (
    // detect, autolink and truncate URLs (www.*, http://*, https://*, ftp://*)
    '/(\s|^)(www\.[\w.\/?#%=\+]+)(\s|$)*?/ieu' => "'$1\"'.wet_cm_truncate('$2', $truncate_urls_at).'\":http://$2$3'",
    '/(\s|^)(https?:\/\/|ftp:\/\/)([\w.\/?#%=\+]+)(\s|$)*?/ieu' => "'$1\"'.wet_cm_truncate('$3', $truncate_urls_at).'\":$2$3$4'"
    );

    if(load_plugin('wet_foullanguage')) {
    	$rules = array_merge($rules, wet_foullanguage());
    }

    $needles = array_keys($rules);
    $pins = array_values($rules);

	$c = (getComment());
	// The comment message lands as a salted $_POST member upon second preview
	// @see publish/comment.php
    if(empty($c['secret'])) {
    	$msg = 'message';
    } else {
    	$msg = md5('message'.$c['secret']);
    }

	// apply the magic
    $_POST[$msg] = preg_replace($needles, $pins, $_POST[$msg]);
}

function wet_cm_truncate($what, $max)
{
	return(strlen(utf8_decode($what)) > $max) ?
		preg_replace('/^(.{0,'.$max.'}).*$/su', '$1', $what).'...' : $what;
}
";s:8:"code_md5";s:32:"874b2cd02d93c0642dba0970aaaa72d5";s:4:"type";s:1:"0";}