a:11:{s:4:"name";s:16:"ras_lang_manager";s:6:"status";s:1:"1";s:6:"author";s:4:"raas";s:10:"author_uri";s:21:"http://textcastle.com";s:7:"version";s:4:"0.1b";s:11:"description";s:16:"Textpack Manager";s:4:"help";s:1339:"<p>This is a testing plugin cloned from commits 3321- 3323 to SVN, to run retrograde under the current download (4.2.0) - use at your own risk. This plugin adds a column to txp_lang named `pack` with a table altering query at installation. This plugin deletes rows in the database as part of it's functionality. Back up your database prior to enabling and using this plugin.</p>
<h3>Sample Textpack</h3>
<fieldset>
<p>
#@public<br />
#@language en-gb<br />
#@packid TXP001<br />
foo_checkbox => Checkbox<br />
foo_contact => Contact<br />
foo_email => Email<br />
foo_email_subject => $var1 > Inquiry<br />
foo_email_thanks => Thank you, your message has been sent.<br />
# comment line<br />
#@language de-de<br />
#@packid TXP002<br />
foo_checkbox => Auswahl<br />
foo_contact => Kontakt<br />
foo_email => E-Mail<br />
foo_email_subject => $var1 > Anfrage<br />
foo_email_thanks => Vielen Dank. Ihre Nachricht wurde versandt.<br />
</p>
</fieldset>
<p><a href="http://forum.textpattern.com/viewtopic.php?id=33182">Forum thread and info</a>
<p>New operative line in textpack text layout is "#@packid" which uses all text to the next line return as a text entry in the `pack` column of txp_lang, this id is applied to all subsequent lines.<br /> The delete buttons remove all rows with the id listed in the database's txp_lang table.</p>";s:4:"code";s:4584:"	if (@txpinterface == 'admin') {
		add_privs('lang_manage', '1,6');
                //-- Event is "lang_manage"
		register_tab("extensions", "lang_manage", "Textpack Manager");
		register_callback("ras_lang_page", "lang_manage");
	}
	
//--------------------------------------------------------------
function ras_lang_page() {
		$msg = "Textpacks";
                  if (!getThing("show fields from `".PFX."txp_lang` like 'pack'")) {
                   $rs = safe_alter("txp_lang", " ADD `pack` VARCHAR( 16 ) NULL DEFAULT NULL AFTER `id`");
                   $msg = ($rs) ? "`pack` field installed in txp_lang" : '';
                  }
			pagetop("Textpacks", $msg );
	                echo n.'<table style="margin: 1em auto; text-align: center;">';
                        echo n.
			tr(
				tda(
					form(
						tag(gTxt('install_textpack'), 'label', ' for="textpack-install"').n.
						'<br /><textarea id="textpack-install" class="code" name="textpack" cols="45" rows="25"></textarea>'.n.
						tag(popHelp('get_textpack'), 'span', ' style="vertical-align: top;"').
						graf(fInput('submit', 'install_new', gTxt('upload'), 'smallerbox')).
						eInput('lang_manage').
						sInput('ras_get_textpack')
					, '', '', 'post', 'text_uploader')
				,' colspan="3"')
			);
                        echo endTable();

           if(gps('step') == 'ras_get_textpack') {
              ras_get_textpack();
           }
           if(gps('step') == 'delete_select') {
              ras_pack_delete(gps('pack_id'));
           }
          ras_packid_get();
}

//-------------------------------------------------------------
function ras_pack_delete($pack_id) { 
	safe_delete('txp_lang' , "pack='$pack_id' " );
    return $pack_id; 
}

//-------------------------------------------------------------
function ras_packid_get() {

  $rs = safe_column("pack","txp_lang", " pack != '' " );
	    echo n.'<div style="margin: .3em auto auto auto; text-align: center;">';  
		echo n.n.startTable('list');
		if ($rs)
		{
			echo assHead(gTxt('ras_pack_id') , 'delete', '', '');			
				foreach ($rs as $key => $value) {
					$id = htmlspecialchars($value);					
				        echo tr(
					n.td($id).
					td(dLink('lang_manage', 'delete_select', 'pack_id', $id),30)
				);
			}
		}			
		echo endTable();
	    echo '</div>';
  return true;
  }

//-------------------------------------------------------------
	function ras_get_textpack()
	{
		$textpack = ps('textpack');
		$n = ras_install_textpack($textpack);
                echo '<p style="margin: 1em auto; text-align: center;">'.
                  gTxt("textpack_strings_installed").' '.
                $n.'</p>';
	}
//-------------------------------------------------------------
	function ras_install_textpack($textpack)
		{
		global $prefs;

		$textpack = explode(n, $textpack);
		if (empty($textpack)) return 0;

		// presume site language equals textpack language
		$language = get_pref('language', 'en-gb');
		$done = 0;
		foreach ($textpack as $line)
		{
			$line = trim($line);
			// A line starting with #, not followed by @ is a simple comment
			if (preg_match('/^#[^@]/', $line, $m))
			{
				continue;
			}

			// A line matching "#@language xx-xx" establishes the designated language for all subsequent lines
			if (preg_match('/^#@language\s+(.+)$/', $line, $m))
			{
				$language = doSlash($m[1]);
				continue;
			}
			// A line matching "#@packid x ... x" establishes the designated packid for all subsequent lines
			if (preg_match('/^#@packid\s+(.+)$/', $line, $m))
			{
				$packid = doSlash($m[1]);
				continue;
			}

			// A line matching "#@event_name" establishes the event value for all subsequent lines
			if (preg_match('/^#@([a-zA-Z0-9_-]+)$/', $line, $m))
			{
				$event = doSlash($m[1]);
				continue;
			}

			// Data lines match a "name => value" pattern. Some white space allowed.
			if (preg_match('/^(\w+)\s*=>\s*(.+)$/', $line, $m))
			{
				if (!empty($m[1]) && !empty($m[2]))
				{
					$name = doSlash($m[1]);
					$value = doSlash($m[2]);
					$where = "lang='$language' AND name='$name'";
					if (safe_count('txp_lang', $where))
					{
						safe_update('txp_lang',	"lastmod=NOW(), data='$value', pack='$packid', event='$event'", $where);
					}
					else
					{
						safe_insert('txp_lang',	"lastmod=NOW(), data='$value', pack='$packid', event='$event', lang='$language', name='$name'");
					}
					++$done;
				}
			}
                    }
		return $done;
	}";s:12:"code_restore";s:4584:"	if (@txpinterface == 'admin') {
		add_privs('lang_manage', '1,6');
                //-- Event is "lang_manage"
		register_tab("extensions", "lang_manage", "Textpack Manager");
		register_callback("ras_lang_page", "lang_manage");
	}
	
//--------------------------------------------------------------
function ras_lang_page() {
		$msg = "Textpacks";
                  if (!getThing("show fields from `".PFX."txp_lang` like 'pack'")) {
                   $rs = safe_alter("txp_lang", " ADD `pack` VARCHAR( 16 ) NULL DEFAULT NULL AFTER `id`");
                   $msg = ($rs) ? "`pack` field installed in txp_lang" : '';
                  }
			pagetop("Textpacks", $msg );
	                echo n.'<table style="margin: 1em auto; text-align: center;">';
                        echo n.
			tr(
				tda(
					form(
						tag(gTxt('install_textpack'), 'label', ' for="textpack-install"').n.
						'<br /><textarea id="textpack-install" class="code" name="textpack" cols="45" rows="25"></textarea>'.n.
						tag(popHelp('get_textpack'), 'span', ' style="vertical-align: top;"').
						graf(fInput('submit', 'install_new', gTxt('upload'), 'smallerbox')).
						eInput('lang_manage').
						sInput('ras_get_textpack')
					, '', '', 'post', 'text_uploader')
				,' colspan="3"')
			);
                        echo endTable();

           if(gps('step') == 'ras_get_textpack') {
              ras_get_textpack();
           }
           if(gps('step') == 'delete_select') {
              ras_pack_delete(gps('pack_id'));
           }
          ras_packid_get();
}

//-------------------------------------------------------------
function ras_pack_delete($pack_id) { 
	safe_delete('txp_lang' , "pack='$pack_id' " );
    return $pack_id; 
}

//-------------------------------------------------------------
function ras_packid_get() {

  $rs = safe_column("pack","txp_lang", " pack != '' " );
	    echo n.'<div style="margin: .3em auto auto auto; text-align: center;">';  
		echo n.n.startTable('list');
		if ($rs)
		{
			echo assHead(gTxt('ras_pack_id') , 'delete', '', '');			
				foreach ($rs as $key => $value) {
					$id = htmlspecialchars($value);					
				        echo tr(
					n.td($id).
					td(dLink('lang_manage', 'delete_select', 'pack_id', $id),30)
				);
			}
		}			
		echo endTable();
	    echo '</div>';
  return true;
  }

//-------------------------------------------------------------
	function ras_get_textpack()
	{
		$textpack = ps('textpack');
		$n = ras_install_textpack($textpack);
                echo '<p style="margin: 1em auto; text-align: center;">'.
                  gTxt("textpack_strings_installed").' '.
                $n.'</p>';
	}
//-------------------------------------------------------------
	function ras_install_textpack($textpack)
		{
		global $prefs;

		$textpack = explode(n, $textpack);
		if (empty($textpack)) return 0;

		// presume site language equals textpack language
		$language = get_pref('language', 'en-gb');
		$done = 0;
		foreach ($textpack as $line)
		{
			$line = trim($line);
			// A line starting with #, not followed by @ is a simple comment
			if (preg_match('/^#[^@]/', $line, $m))
			{
				continue;
			}

			// A line matching "#@language xx-xx" establishes the designated language for all subsequent lines
			if (preg_match('/^#@language\s+(.+)$/', $line, $m))
			{
				$language = doSlash($m[1]);
				continue;
			}
			// A line matching "#@packid x ... x" establishes the designated packid for all subsequent lines
			if (preg_match('/^#@packid\s+(.+)$/', $line, $m))
			{
				$packid = doSlash($m[1]);
				continue;
			}

			// A line matching "#@event_name" establishes the event value for all subsequent lines
			if (preg_match('/^#@([a-zA-Z0-9_-]+)$/', $line, $m))
			{
				$event = doSlash($m[1]);
				continue;
			}

			// Data lines match a "name => value" pattern. Some white space allowed.
			if (preg_match('/^(\w+)\s*=>\s*(.+)$/', $line, $m))
			{
				if (!empty($m[1]) && !empty($m[2]))
				{
					$name = doSlash($m[1]);
					$value = doSlash($m[2]);
					$where = "lang='$language' AND name='$name'";
					if (safe_count('txp_lang', $where))
					{
						safe_update('txp_lang',	"lastmod=NOW(), data='$value', pack='$packid', event='$event'", $where);
					}
					else
					{
						safe_insert('txp_lang',	"lastmod=NOW(), data='$value', pack='$packid', event='$event', lang='$language', name='$name'");
					}
					++$done;
				}
			}
                    }
		return $done;
	}";s:8:"code_md5";s:32:"f3b56df0853e24baa4716bdbe844ba3f";s:4:"type";s:1:"1";}